<!-- é¦–é¡µ -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>é¦–é¡µ</title>
    <link rel="stylesheet" href="../../layui/css/layui.css">
    <!-- æ ·å¼ -->
    <link rel="stylesheet" href="../../css/style.css"/>
    <!-- ä¸»é¢˜ï¼ˆä¸»è¦é¢œè‰²è®¾ç½®ï¼‰ -->
    <link rel="stylesheet" href="../../css/theme.css"/>
    <!-- é€šç”¨çš„css -->
    <link rel="stylesheet" href="../../css/common.css"/>
</head>
<style>
    html::after {
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        content: '';
        display: block;
        background-attachment: fixed;
        background-size: cover;
        background-position: center;
        z-index: -1;
    }

    #swiper {
        overflow: hidden;
    }

    #swiper .layui-carousel-ind li {
        width: 16px;
        height: 10px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        border-radius: 3px;
        background-color: #f7f7f7;
        box-shadow: 0 0 6px rgba(255, 0, 0, .8);
    }

    #swiper .layui-carousel-ind li.layui-this {
        width: 24px;
        height: 10px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        border-radius: 6px;
        background-color: red;
        box-shadow: 0 0 6px rgba(255, 0, 0, .8);
    }

    input#buynumber::-webkit-outer-spin-button, input::-webkit-inner-spin-button {
        -webkit-appearance: none;
    }

    input#buynumber[type="number"] {
        -moz-appearance: textfield;
    }

    .message-container {
        width: 100%
    }

    .detail-tab .layui-tab-card > .layui-tab-title .layui-this {
        background-color: rgba(250, 255, 114, 1);
        color: rgba(155, 68, 0, 1);
        font-size: 19px;
    }

    .data-detail {
        padding-bottom: 20px;
    }

    .data-detail .layui-breadcrumb a.first {
        color: rgba(214, 236, 240, 1) !important;
    }

/*    ç¥*/
    .snowflake {
        position: absolute;
        top: -10px;
        z-index: 9999;
        user-select: none;
        pointer-events: none;
        animation: snowflakes-fall linear infinite, snowflakes-shake ease-in-out infinite;
    }

    @keyframes snowflakes-fall {
        0% { top: -10%; }
        100% { top: 100%; }
    }

    @keyframes snowflakes-shake {
        0%, 100% { transform: translateX(0); }
        50% { transform: translateX(80px); }
    }

    .snowflake:nth-of-type(odd) {
        animation-duration: 12s, 4s;
    }

    .snowflake:nth-of-type(even) {
        animation-duration: 12s, 4s;
    }

    body {
        position: relative;
        margin: 0;
        overflow: hidden;
        background-image: url('http://localhost:8080/wangshangshangchengB/upload/3.jpg'); /* èƒŒæ™¯å›¾çš„URL */
        background-size: cover; /* èƒŒæ™¯å›¾è¦†ç›–æ•´ä¸ªé¡µé¢ */
        background-position: center; /* èƒŒæ™¯å›¾å±…ä¸­ */
        background-repeat: no-repeat; /* èƒŒæ™¯å›¾ä¸é‡å¤ */
    }
</style>
<body>

<div id="app">

    <div class="data-detail">
        <div class="data-detail-breadcrumb"
             :style='{"padding":"0 10px","boxShadow":"6px 2px 6px rgba(46, 78, 126, 1)","margin":"20px auto","borderColor":"rgba(255,0,0,.3)","backgroundColor":"rgba(46, 78, 126, 1)","borderRadius":"4px","borderWidth":"0","borderStyle":"solid","height":"80px"}'>
					<span class="layui-breadcrumb">
						<a class="first"
                           :style='{"padding":"8px 10px","boxShadow":"0 0 0px ","margin":"0 15px","borderColor":"rgba(255,0,0,.3)","backgroundColor":"rgba(46, 78, 126, 1)","color":"rgba(214, 236, 240, 1)","borderRadius":"0","borderWidth":"0","fontSize":"20px","borderStyle":"solid"}'
                           href="../home/home.html">é¦–é¡µ</a>
						<a><cite
                                :style='{"padding":"8px 15px","boxShadow":"0 0 0px rgba(46, 78, 126, 1)","margin":"0 15px","borderColor":"rgba(255,0,0,.3)","backgroundColor":"rgba(46, 78, 126, 1)","color":"rgba(255, 251, 240, 1)","borderRadius":"4px","borderWidth":"0","fontSize":"20px","borderStyle":"solid"}'>{{title}}</cite></a>
					</span>

            <a :style='{"padding":"0 12px","boxShadow":"0 0 6px rgba(255,0,0,.3)","borderColor":"rgba(255,0,0,.3)","backgroundColor":"rgba(240, 252, 255, 1)","color":"rgba(0, 188, 18, 1)","borderRadius":"4px","borderWidth":"0","fontSize":"17px","lineHeight":"40px","borderStyle":"solid"}'
               @click="storeUp()" href="javascript:void(0)">
                <i class="layui-icon" style="font-size: 20px;color: red;" v-if='true'
                   :style='{"color":"rgba(0, 188, 18, 1)","padding":"0 2px 0 0","fontSize":"18px"}'>&#xe67a;</i>ç‚¹æˆ‘æ”¶è—
            </a>

        </div>
        <div class="layui-row" style="display: flex">
            <div class="layui-col-md5" style="width:500px">
                <!-- <div class="layui-carousel" id="swiper">
                    <div carousel-item id="swiper-item">
                        <div v-for="(item,index) in swiperList" v-bind:key="index">
                            <img class="swiper-item" :src="item.img">
                        </div>
                    </div>
                </div> -->
                <div class="layui-carousel" id="swiper"
                     :style='{"boxShadow":"8px 6px 10px #065279","margin":"0 auto","borderColor":"rgba(0,0,0,.3)","borderRadius":"6px","borderWidth":"0","width":"500px","borderStyle":"solid","height":"400px"}'>
                    <div carousel-item>
                        <div v-if="swiperList.length" v-for="(item,index) in swiperList" :key="index">
                            <img style="width: 100%;height: 100%;object-fit:cover;" :src="item"/>
                        </div>
                    </div>
                </div>


            </div>
            <div class="layui-col-md7" style="padding-left: 20px;flex: 1;"
                 :style='{"padding":"0","boxShadow":"6px 6px 2px  #a1afc9","margin":"0px 40px","borderColor":"rgba(46, 78, 126, 1)","backgroundColor":"rgba(240, 252, 255, 1)","borderRadius":"2px 2px 2px 2px","borderWidth":"1px","borderStyle":"dashed"}'>
                <h1 style="position: relative;"
                    :style='{"padding":"20px 30px","boxShadow":"0 0 0px #065279","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","color":"rgba(179, 92, 68, 1)","borderRadius":"0","textAlign":"center","borderWidth":"0","fontSize":"20px","borderStyle":"solid"}'
                    class="title">{{title}}</h1>

                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     v-if="detail.price" class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>ä»·æ ¼ï¼š</span>
                    <span :style='{"padding":"5px 0","boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"red","borderRadius":"0","textAlign":"left","borderWidth":"0","width":"100%","lineHeight":"20px","fontSize":"20px","borderStyle":"solid"}'
                          class="price">
								{{detail.price}}RMB
							</span>
                </div>
                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     v-if="detail.jifen" class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>ç§¯åˆ†ï¼š</span>
                    <span :style='{"padding":"5px 0","boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"rgba(255, 0, 151, 1)","borderRadius":"0","textAlign":"left","borderWidth":"0","width":"100%","lineHeight":"20px","fontSize":"20px","borderStyle":"solid"}'
                          class="price">
								{{detail.jifen}}
							</span>
                </div>
                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     v-if="detail.onelimittimes" class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>å•æ¬¡è´­ä¹°ï¼š</span>
                    <span :style='{"padding":"5px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"#333","borderRadius":"6px","textAlign":"left","borderWidth":"0","width":"auto","lineHeight":"20px","fontSize":"15px","borderStyle":"solid"}'
                          class="desc">
								{{detail.onelimittimes}}
							</span>
                </div>
                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     v-if="detail.alllimittimes" class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>åº“å­˜ï¼š</span>
                    <span :style='{"padding":"5px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"#333","borderRadius":"6px","textAlign":"left","borderWidth":"0","width":"auto","lineHeight":"20px","fontSize":"15px","borderStyle":"solid"}'
                          class="desc">
								{{detail.alllimittimes}}
							</span>
                </div>


                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>å•†å“åˆ†ç±»ï¼š</span>
                    <span :style='{"padding":"5px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"#333","borderRadius":"6px","textAlign":"left","borderWidth":"0","width":"auto","lineHeight":"20px","fontSize":"15px","borderStyle":"solid"}'
                          class="desc">
								{{detail.shangpinfenlei}}
							</span>
                </div>
                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>æ ‡ç­¾ï¼š</span>
                    <span :style='{"padding":"5px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"#333","borderRadius":"6px","textAlign":"left","borderWidth":"0","width":"auto","lineHeight":"20px","fontSize":"15px","borderStyle":"solid"}'
                          class="desc">
								{{detail.biaoqian}}
							</span>
                </div>
                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>å“ç‰Œï¼š</span>
                    <span :style='{"padding":"5px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"#333","borderRadius":"6px","textAlign":"left","borderWidth":"0","width":"auto","lineHeight":"20px","fontSize":"15px","borderStyle":"solid"}'
                          class="desc">
								{{detail.pinpai}}
							</span>
                </div>
                <div :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'
                     class="detail-item">
                    <span :style='{"padding":"0 12px 0 0","minWidth":"110px","fontSize":"15px","color":"rgba(80, 97, 109, 1)","textAlign":"left"}'>ç‚¹å‡»æ¬¡æ•°ï¼š</span>
                    <span :style='{"padding":"5px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"#333","borderRadius":"6px","textAlign":"left","borderWidth":"0","width":"auto","lineHeight":"20px","fontSize":"15px","borderStyle":"solid"}'
                          class="desc">
								{{detail.clicknum}}
							</span>
                </div>


                <div class="detail-item"
                     :style='{"padding":"6px 15px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"dotted"}'>

                    <div class="num-picker">
                        <button style="height:auto;"
                                :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(244, 121, 131, 1)","color":"#666","borderRadius":"4px 0 0 4px","borderWidth":"1px","width":"34px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}'
                                type="button" @click="buynumber>0?buynumber--:buynumber"
                                class="layui-btn layui-btn-primary">-
                        </button>
                        <input style="height:auto;"
                               :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(255, 242, 223, 1)","color":"rgba(255, 45, 81, 1)","borderRadius":"0","borderWidth":"1px 0","width":"44px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}'
                               type="number" v-model="buynumber" id="buynumber" name="buynumber" class="layui-input"
                               disabled="disabled"></input>
                        <button style="height:auto;"
                                :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(68, 206, 246, 1)","color":"#666","borderRadius":"0 4px 4px 0","borderWidth":"1px","width":"34px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}'
                                type="button" @click="buynumber++" class="layui-btn layui-btn-primary">+
                        </button>
                    </div>
                    <button style="height:auto;"
                            :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,.3)","margin":"0 5px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(244, 121, 131, 1)","color":"rgba(240, 252, 255, 1)","borderRadius":"6px","borderWidth":"0","width":"auto","lineHeight":"40px","fontSize":"16px","borderStyle":"solid"}'
                            @click="addCartTap" type="button" class="layui-btn layui-btn-warm">
                        æ·»åŠ åˆ°è´­ç‰©è½¦
                    </button>

                    <button style="height:auto;"
                            :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 5px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(23, 124, 176, 1)","color":"rgba(255, 255, 255, 1)","borderRadius":"6px","borderWidth":"0","width":"auto","lineHeight":"40px","fontSize":"16px","borderStyle":"solid"}'
                            @click="buyTap" type="button" class="layui-btn btn-submit">
                        ç«‹å³è´­ä¹°
                    </button>


                </div>

            </div>
        </div>


        <div class="layui-row detail-tab">
            <div class="layui-tab layui-tab-card"
                 :style='{"boxShadow":"8px 6px 6px #c2ccd0","borderColor":"rgba(117, 135, 138, 1)","backgroundColor":"#fff","borderRadius":"6px","borderStyle":"solid","borderWidth":"1px"}'
                 style="overflow: hidden;">

                <ul class="layui-tab-title"
                    :style='{"color":"rgba(23, 124, 176, 1)","backgroundColor":"rgba(233, 241, 246, 1)","fontSize":"18px"}'>

                    <li class="layui-this">å•†å“è¯¦æƒ…</li>


                    <li>è¯„è®º</li>


                </ul>

                <div class="layui-tab-content">

                    <div class="layui-tab-item layui-show">
                        <div v-html="detail.shangpinxiangqing"></div>
                    </div>


                    <div class="layui-tab-item">
                        <div class="message-container">
                            <form class="layui-form message-form"
                                  :style='{"padding":"20px","boxShadow":"0 0 0px #e0f0e9","margin":"0 0 20px 0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"rgba(224, 240, 233, 1)","borderRadius":"6px","borderWidth":"0","borderStyle":"solid"}'>
                                <div class="layui-form-item layui-form-text"
                                     style="display: flex;align-items: center;margin:0">
                                    <label style="width: auto;"
                                           :style='{"padding":"0","minWidth":"60px","fontSize":"16px","color":"#333","textAlign":"left"}'
                                           class="layui-form-label">è¯„è®º</label>
                                    <div class="layui-input-block" style="margin:0;flex:1;">
                                        <textarea
                                                :style='{"padding":"10px","boxShadow":"0px 0 4px #1685a9","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"rgba(219, 90, 107, 1)","borderRadius":"4px","borderWidth":"0","fontSize":"16px","borderStyle":"solid","height":"120px"}'
                                                name="content" required lay-verify="required" placeholder="è¯·è¾“å…¥å†…å®¹"
                                                class="layui-textarea"></textarea>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <button :style='{"padding":"0 10px","boxShadow":"2px 3px 6px #808080","margin":"10px 5px 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"red","color":"#fff","borderRadius":"6px","borderWidth":"0","width":"auto","lineHeight":"40px","fontSize":"14px","borderStyle":"solid"}'
                                                class="layui-btn btn-submit" lay-submit lay-filter="*">ç«‹å³æäº¤
                                        </button>
                                        <button :style='{"padding":"0 10px","boxShadow":"2px 2px 6px #808080","margin":"10px 5px 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(249, 144, 111, 1)","color":"rgba(255, 251, 240, 1)","borderRadius":"6px","borderWidth":"0","width":"auto","lineHeight":"40px","fontSize":"14px","borderStyle":"solid"}'
                                                type="reset" class="layui-btn layui-btn-primary">é‡ç½®
                                        </button>
                                    </div>
                                </div>
                            </form>
                            <div class="message-list"
                                 :style='{"padding":"0 20px 20px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0","borderColor":"rgba(255,0,0,.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0","borderStyle":"solid"}'>
                                <div :style='{"padding":"20px 0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(6, 82, 121, 1)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                                     class="message-item" v-for="(item,index) in dataList" v-bind:key="index">
                                    <div class="username-container">
                                        <img :style='{"boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 10px 0 0","borderColor":"rgba(0,0,0,.3)","borderRadius":"100%","borderWidth":"0","width":"50px","borderStyle":"solid","height":"50px"}'
                                             class="avator"
                                             src="http://codegen.caihongy.cn/20210112/de962481c19445bcaf7ef2d62f301eaf.jpg">
                                        <span style="display: inline-block;"
                                              :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"rgba(128, 128, 128, 1)","borderRadius":"4px","borderWidth":"0","width":"auto","lineHeight":"28px","fontSize":"15px","borderStyle":"solid"}'
                                              class="username">ç”¨æˆ·ï¼š{{item.userid}}</span>
                                    </div>
                                    <div class="content" style="margin: 0;flex: 1;">
												<span style="display: inline-block;"
                                                      :style='{"padding":"8px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"8px 0 0 50px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(255, 0, 0, 0)","color":"rgba(219, 90, 107, 1)","borderRadius":"4px","borderWidth":"0","fontSize":"15px","borderStyle":"solid"}'
                                                      class="message">
													{{item.content}}
												</span>
                                    </div>
                                    <div v-if="item.reply" class="content" style="margin: 0;flex: 1;">
												<span style="display: inline-block;"
                                                      :style='{"padding":"8px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"8px 0 0 50px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(255, 0, 0, 0)","color":"rgba(219, 90, 107, 1)","borderRadius":"4px","borderWidth":"0","fontSize":"15px","borderStyle":"solid"}'
                                                      class="message">
													å›å¤:{{item.reply}}
												</span>
                                    </div>
                                </div>
                            </div>
                            <div class="pager" id="pager"></div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>

</div>


<script src="../../layui/layui.js"></script>
<script src="../../js/vue.js"></script>
<!-- ç»„ä»¶é…ç½®ä¿¡æ¯ -->
<script src="../../js/config.js"></script>
<!-- æ‰©å±•æ’ä»¶é…ç½®ä¿¡æ¯ -->
<script src="../../modules/config.js"></script>
<!-- å·¥å…·æ–¹æ³• -->
<script src="../../js/utils.js"></script>

<script>
    const symbols = ['â„', 'â…', 'â†', 'â˜ƒ', 'â‡','â€','â™¥','ğŸ–','ğŸ’›']; // å­˜å‚¨ä¸åŒçš„ç¬¦å·

    // åˆ›å»ºé›ªèŠ±
    function createSnowflake() {
        const snowflake = document.createElement('div');
        snowflake.classList.add('snowflake');

        // éšæœºé€‰æ‹©ä¸€ä¸ªç¬¦å·
        const symbol = symbols[Math.floor(Math.random() * symbols.length)];
        snowflake.textContent = symbol;

        // è®¾ç½®é›ªèŠ±åˆå§‹ä½ç½®
        snowflake.style.left = Math.random() * 100 + 'vw';
        snowflake.style.fontSize = Math.random() * 10 + 10 + 'px';

        document.getElementById('snowflakes-container').appendChild(snowflake);

        // ç§»é™¤é›ªèŠ±
        setTimeout(() => {
            snowflake.remove();
        }, 12000); // å»¶é•¿å­˜åœ¨æ—¶é—´ä»¥åŒ¹é…åŠ¨ç”»æ—¶é•¿
    }

    // å®šæ—¶åˆ›å»ºé›ªèŠ±
    setInterval(createSnowflake, 200);
</script>

<script>
    var vue = new Vue({
        el: '#app',
        data: {
            // è½®æ’­å›¾
            swiperList: [],
            // æ•°æ®è¯¦æƒ…
            detail: {
                id: 0
            },
            // å•†å“æ ‡é¢˜
            title: '',
            // å€’è®¡æ—¶
            count: 0,
            // åŠ å…¥è´­ç‰©è½¦æ•°é‡
            buynumber: 1,
            // å½“å‰è¯¦æƒ…é¡µè¡¨
            detailTable: 'shangpinxinxi',
            // è¯„ä»·åˆ—è¡¨
            dataList: [],
            // é€‰åº§åº§ä½åˆ—è¡¨
            numberList: []
        },
        // å€’è®¡æ—¶æ•ˆæœ
        computed: {
            SecondToDate: function () {
                var time = this.count;
                if (null != time && "" != time) {
                    if (time > 60 && time < 60 * 60) {
                        time =
                            parseInt(time / 60.0) +
                            "åˆ†é’Ÿ" +
                            parseInt((parseFloat(time / 60.0) - parseInt(time / 60.0)) * 60) +
                            "ç§’";
                    } else if (time >= 60 * 60 && time < 60 * 60 * 24) {
                        time =
                            parseInt(time / 3600.0) +
                            "å°æ—¶" +
                            parseInt(
                                (parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
                            ) +
                            "åˆ†é’Ÿ" +
                            parseInt(
                                (parseFloat(
                                    (parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
                                    ) -
                                    parseInt(
                                        (parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
                                    )) *
                                60
                            ) +
                            "ç§’";
                    } else if (time >= 60 * 60 * 24) {
                        time =
                            parseInt(time / 3600.0 / 24) +
                            "å¤©" +
                            parseInt(
                                (parseFloat(time / 3600.0 / 24) - parseInt(time / 3600.0 / 24)) *
                                24
                            ) +
                            "å°æ—¶" +
                            parseInt(
                                (parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
                            ) +
                            "åˆ†é’Ÿ" +
                            parseInt(
                                (parseFloat(
                                    (parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
                                    ) -
                                    parseInt(
                                        (parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
                                    )) *
                                60
                            ) +
                            "ç§’";
                    } else {
                        time = parseInt(time) + "ç§’";
                    }
                }
                return time;
            }
        },
        //  æ¸…é™¤å®šæ—¶å™¨
        destroyed: function () {
            window.clearInterval(this.inter);
        },
        methods: {
            jump(url) {
                jump(url)
            },
            isAuth(tablename, button) {
                return isFrontAuth(tablename, button)
            },
            // å€’è®¡æ—¶åˆå§‹åŒ–
            countDown() {
                let reversetime = new Date(this.detail.reversetime).getTime()
                let now = new Date().getTime();
                let count = reversetime - now;
                if (count > 0) {
                    this.count = count / 1000
                    var _this = this;
                    this.inter = window.setInterval(function () {
                        _this.count = _this.count - 1;
                        if (_this.count < 0) {
                            window.clearInterval(_this.inter);
                            layer.msg("æ´»åŠ¨å·²ç»“æŸ", {
                                time: 2000,
                                icon: 5
                            })
                        }
                    }, 1000);
                }
            },

            // ä¸‹è½½æ–‡ä»¶
            downFile(url) {
                var download = $("#download");
                download.append(
                    "<a id=\"down\" href=\"aaaa.txt\" target=\"_blank\" download=\"aaaa.txt\" style=\"display:none\">ä¸‹è½½è¯¥æ–‡ä»¶</a>");
                console.log(download);
                $("#down")[0].click();
            },
            // è·¨è¡¨
            onAcrossTap(acrossTable) {
                localStorage.setItem('crossTable', `shangpinxinxi`);
                localStorage.setItem('crossObj', JSON.stringify(this.detail));
                jump(`../${acrossTable}/add.html?corss=true`);
            },

            // æ·»åŠ åˆ°è´­ç‰©è½¦
            addCartTap() {
                // æ´»åŠ¨å€’è®¡æ—¶é™åˆ¶
                // å•æ¬¡è´­ä¹°é™åˆ¶
                if (this.detail.onelimittimes && this.detail.onelimittimes > 0 && this.detail.onelimittimes < this.buynumber) {
                    layer.msg(`æ¯äººå•æ¬¡åªèƒ½è´­ä¹°${this.detail.onelimittimes}æ¬¡`, {
                        time: 2000,
                        icon: 5
                    });
                    return
                }
                // åº“å­˜é™åˆ¶
                if (this.detail.alllimittimes && this.detail.alllimittimes > 0 && this.detail.alllimittimes < this.buynumber) {
                    layer.msg(`å•†å“å·²å”®ç½„`, {
                        time: 2000,
                        icon: 5
                    });
                    return
                }
                // æŸ¥è¯¢æ˜¯å¦å·²ç»æ·»åŠ åˆ°è´­ç‰©è½¦
                layui.http.request('cart/list', 'get', {
                    userid: localStorage.getItem('userid'),
                    tablename: `${this.detailTable}`,
                    goodid: this.detail.id
                }, (res) => {
                    if(res.data.list.length > 0
            )
                {
                    layer.msg("è¯¥å•†å“å·²ç»æ·»åŠ åˆ°è´­ç‰©è½¦", {
                        time: 2000,
                        icon: 5
                    });
                    return
                }
                layui.http.requestJson('cart/save', 'post', {
                    tablename: `${this.detailTable}`,
                    goodid: this.detail.id,
                    goodname: this.title,
                    picture: this.swiperList[0],
                    buynumber: this.buynumber,
                    userid: localStorage.getItem('userid'),
                    price: this.detail.price,
                    discountprice: this.detail.vipprice ? this.detail.vipprice : 0
                }, (res) => {
                    layer.msg("æ·»åŠ åˆ°è´­ç‰©è½¦æˆåŠŸ", {
                    time: 2000,
                    icon: 6
                });
            })
                ;
            })
            },

            // ç«‹å³è´­ä¹°
            buyTap() {
                // æ´»åŠ¨å€’è®¡æ—¶é™åˆ¶
                // å•æ¬¡è´­ä¹°é™åˆ¶
                if (this.detail.onelimittimes && this.detail.onelimittimes > 0 && this.detail.onelimittimes < this.buynumber) {
                    layer.msg(`æ¯äººå•æ¬¡åªèƒ½è´­ä¹°${this.detail.onelimittimes}æ¬¡`, {
                        time: 2000,
                        icon: 5
                    });
                    return
                }
                // åº“å­˜é™åˆ¶
                if (this.detail.alllimittimes && this.detail.alllimittimes > 0 && this.detail.alllimittimes < this.buynumber) {
                    layer.msg(`å•†å“å·²å”®ç½„`, {
                        time: 2000,
                        icon: 5
                    });
                    return
                }
                // ä¿å­˜åˆ°storageä¸­ï¼Œåœ¨ç¡®è®¤ä¸‹å•é¡µé¢ä¸­è·å–è¦è´­ä¹°çš„å•†å“
                localStorage.setItem('orderGoods', JSON.stringify([{
                    tablename: `${this.detailTable}`,
                    goodid: this.detail.id,
                    goodname: this.title,
                    picture: this.swiperList[0],
                    buynumber: this.buynumber,
                    userid: localStorage.getItem('userid'),
                    price: this.detail.price,
                    discountprice: this.detail.vipprice ? this.detail.vipprice : 0
                }]));
                // è·³è½¬åˆ°ç¡®è®¤ä¸‹å•é¡µé¢
                jump('../shop-order/confirm.html');
            },


            // æ”¶è—å•†å“
            storeUp() {
                layui.http.requestJson('storeup/save', 'post', {
                    userid: localStorage.getItem('userid'),
                    name: this.title,
                    picture: this.swiperList[0],
                    refid: this.detail.id,
                    tablename: this.detailTable
                }, function (res) {
                    layer.msg(`æ”¶è—æˆåŠŸ`, {
                        time: 2000,
                        icon: 6
                    });
                });
            },


        }
    })

    layui.use(['layer', 'form', 'element', 'carousel', 'http', 'jquery', 'laypage'], function () {
        var layer = layui.layer;
        var element = layui.element;
        var form = layui.form;
        var carousel = layui.carousel;
        var http = layui.http;
        var jquery = layui.jquery;
        var laypage = layui.laypage;

        var limit = 10;

        // æ•°æ®ID
        var id = http.getParam('id');
        vue.detail.id = id;

        // å•†å“ä¿¡æ¯
        http.request(`${vue.detailTable}/detail/` + id, 'get', {}, function (res) {
            // è¯¦æƒ…ä¿¡æ¯
            vue.detail = res.data
            vue.title = vue.detail.shangpinmingcheng;
            // è½®æ’­å›¾ç‰‡
            vue.swiperList = vue.detail.tupian ? vue.detail.tupian.split(",") : [];
            // var swiperItemHtml = '';
            // for (let item of vue.swiperList) {
            // 	swiperItemHtml +=
            // 		'<div>' +
            // 		'<img class="swiper-item" style="width: 100%;height: 100%;object-fit:cover;" src="' + item + '">' +
            // 		'</div>';
            // }
            // jquery('#swiper-item').html(swiperItemHtml);
            // è½®æ’­å›¾
            vue.$nextTick(() => {
                carousel.render({
                elem: '#swiper',
                width: '500px',
                height: '400px',
                arrow: 'hover',
                anim: 'default',
                autoplay: 'true',
                interval: '3000',
                indicator: 'inside'
            });

        })
            // carousel.render({
            // 	elem: '#swiper',
            // 	width: swiper.width,height:swiper.height,
            // 	arrow: swiper.arrow,
            // 	anim: swiper.anim,
            // 	interval: swiper.interval,
            // 	indicator: swiper.indicator
            // });


        });

        // è·å–è¯„è®º
        http.request(`discuss${vue.detailTable}/list`, 'get', {
            page: 1,
            limit: limit,
            refid: vue.detail.id
        }, function (res) {
            vue.dataList = res.data.list
            // åˆ†é¡µ
            laypage.render({
                elem: 'pager',
                count: res.data.total,
                limit: limit,
                jump: function (obj, first) {
                    //é¦–æ¬¡ä¸æ‰§è¡Œ
                    if (!first) {
                        http.request(`discuss${vue.detailTable}/list`, 'get', {
                            page: obj.curr,
                            limit: obj.limit,
                            refid: vue.detail.id
                        }, function (res) {
                            vue.dataList = res.data.list
                        })
                    }
                }
            });
        })

        // æäº¤è¯„è®º
        form.on('submit(*)', function (data) {
            data = data.field;
            data.userid = localStorage.getItem('userid')
            data.refid = vue.detail.id
            http.requestJson(`discuss${vue.detailTable}/save`, 'post', data, function (res) {
                layer.msg('è¯„è®ºæˆåŠŸ', {
                    time: 2000,
                    icon: 6
                }, function () {
                    window.location.reload();
                });
                return false
            });
            return false
        });

    });
</script>
</body>
</html>
